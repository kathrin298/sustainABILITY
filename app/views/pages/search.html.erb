<div class="container">

  <% if params[:search_type] == "company_mission" %>
    <% params[:search_type] = "Companies" %>
  <% end %>

  <div class="serp-searchbar">
    <%= form_tag search_path, method: :get do %>
      <%= select_tag(:search_type, options_for_select([["Developers","Developers"],
                  ["Companies","Companies"]], params[:search_type] ), class:"select") %>&nbsp;&nbsp;&nbsp;
      <%= text_field_tag :query,
        params[:query],
        class: "form-control d-flex",
        placeholder: "search..."
      %>
      <%= button_tag(type: 'submit', class: "btn") do %>
         <i class="fas fa-search"></i>
      <% end %>
    <% end %>
  </div>


  <% if params[:search_type] == 'Companies' %>
    <% if params[:query] == ""  %>
      <h2 style="padding: 20px;">All companies</h2>
    <% else %>
      <h2 style="padding: 20px;">Showing <%= pluralize @results.size, 'company' %> matching your query "<%= params[:query] %>"</h2>
    <% end %>
  <% else %>
    <% if params[:query] == ""   %>
      <h2 style="padding: 20px;">All developers</h2>
    <% else %>
      <h2 style="padding: 20px;">Showing <%= pluralize @results.size, 'developer' %> matching your query "<%= params[:query] %>"</h2>
    <% end %>
  <% end %>


  <% @results.each do |result| %>
    <% if result.respond_to?(:name) %>
      <%= render 'pages/company_serp', company: result %>
    <% else %>
      <%= render 'pages/developer_serp', developer: result %>
    <% end %>
  <% end %>

</div>

