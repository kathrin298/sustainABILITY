<div class="container">
  <div class="dashboard-table">
    <div class="dashboard-header">
      <h1>My Dashboard</h1>
      <%= link_to 'Post a Job', new_company_job_path(@company.id), class: "btn btn-flat message" if current_user.company.present? %>
    </div>
    <div class="dashboard-body">
      <% if current_user.developer.present? %>
      <ul class="nav nav-tabs nav-fill" id="nav-developer" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" id="favorite-jobs-list" data-toggle="tab" href="#favorite-jobs" role="tab" aria-controls="favorite-jobs" aria-selected="true">Favorite Jobs</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="submitted-applications-tab" data-toggle="tab" href="#submitted-applications" role="tab" aria-controls="submitted-applications" aria-selected="false">Submitted Appications</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="previous-jobs-tab" data-toggle="tab" href="#previous-jobs" role="tab" aria-controls="previous-jobs" aria-selected="false">Previous Jobs</a>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="favorite-jobs" role="tabpanel" aria-labelledby="favorite-jobs-list">These are a few of my favorite things</div>
        <div class="tab-pane fade" id="submitted-applications" role="tabpanel" aria-labelledby="submitted-applications-tab">
        <ul>
          <% @applications.each do |application| %>
            <li><%= link_to application.job.job_title, application_path(application) %> </li>
          <% end %>
        </ul>
        </div>
        <div class="tab-pane fade" id="previous-jobs" role="tabpanel" aria-labelledby="previous-jobs-tab">I worked so many jobs before! Look at how productive I am. LOOK AT IT!</div>
      </div>
      <% elsif current_user.company.present? %>
      <ul class="nav nav-tabs nav-fill" id="nav-developer" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" id="favorite-developers-list" data-toggle="tab" href="#favorite-developers" role="tab" aria-controls="favorite-developers" aria-selected="true">Favorite Developers</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="posted-jobs-tab" data-toggle="tab" href="#posted-jobs" role="tab" aria-controls="posted-jobs" aria-selected="false">Posted Jobs</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="received-applications-tab" data-toggle="tab" href="#received-applications" role="tab" aria-controls="received-applications" aria-selected="false">Received Applications</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="previous-hires-tab" data-toggle="tab" href="#previous-hires" role="tab" aria-controls="previous-hires" aria-selected="false">Hired Developers</a>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="favorite-developers" role="tabpanel" aria-labelledby="favorite-developers-list">
          <ul> <!-- This is just to have something to show on this tab, will need to reconfigure once the favorites function is working correctly -->
            <% @developers.each do |developer| %>
              <li><%= developer.first_name %> <%= developer.last_name %></li>
              <div class="developer-card">
                <img src="https://raw.githubusercontent.com/lewagon/fullstack-images/master/uikit/skateboard.jpg" />
                <div class="developer-card-info">
                  <h2>Product name</h2>
                  <p>Product description with <strong>relevant info</strong> only.</p>
                </div>
              </div>
            <% end %>
          </ul>
        </div>
        <div class="tab-pane fade" id="posted-jobs" role="tabpanel" aria-labelledby="posted-jobs-tab">
          <ul>
            <% @jobs.each do |job| %>
              <li><%= link_to job.job_title, job_path(job) %></li>
            <% end %>
          </ul>
        </div>
        <div class="tab-pane fade" id="received-applications" role="tabpanel" aria-labelledby="received-applications-tab">
          <ul>
            <% @jobs.each do |job| %>
              <% job.applications.each do |application| %>
                <% if application.status == 'pending' %>
                  <li><%= link_to application.developer.first_name + " " + application.developer.last_name, application_path(application) %> </li>
                <% end %>
              <% end %>
            <% end %>
          </ul>
        </div>
        <div class="tab-pane fade" id="previous-hires" role="tabpanel" aria-labelledby="previous-hires-tab">
          <ul>
            <% @developers.each do |developer| %>
              <li><%= link_to developer.first_name + ' ' + developer.last_name, developer_path(developer) %> </li>
            <% end %>
          </ul>
        </div>
      </div>
      <% end %>
    </div>
  </div>
</div>
